BIDDABLE AGENT API - GETTING STARTED
================================================================================

OVERVIEW

The Biddable Agent API allows programmatic access to campaign, asset, and
audience management. This API is designed for AI agents and automation tools
to manage advertising campaigns on behalf of organizations.

Base URL: https://your-domain.com/api/v1/agent
Authentication: API Key (Bearer token)
Rate Limit: 1000 requests/hour (varies by endpoint)
Budget Limit: $10,000/month per organization


QUICK START

1. Create an API Key

   a. Log in to your Biddable account
   b. Navigate to your profile page
   c. Scroll to "Organization API Keys" section
   d. Click "Create New Key"
   e. Copy the key immediately (it will only be shown once)

   Note: API keys are shared across your entire organization.


2. Make Your First Request

   Example: List all campaigns

   curl -X GET https://your-domain.com/api/v1/agent/campaigns/list \
     -H "Authorization: Bearer YOUR_API_KEY" \
     -H "Content-Type: application/json"


3. Create a Campaign

   curl -X POST https://your-domain.com/api/v1/agent/campaigns/create \
     -H "Authorization: Bearer YOUR_API_KEY" \
     -H "Content-Type: application/json" \
     -d '{
       "name": "Summer Sale 2025",
       "platforms": ["google", "reddit"],
       "budget": 5000,
       "start_date": "2025-06-01",
       "end_date": "2025-08-31",
       "goal": "Drive product sales"
     }'


AUTHENTICATION

All API requests require authentication via Bearer token in the Authorization
header:

Authorization: Bearer bbl_your_api_key_here

Invalid or missing API keys return 401 Unauthorized.


RESPONSE FORMAT

Success Response:
{
  "success": true,
  "data": {
    // Response data
  }
}

Error Response:
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "Human-readable error message",
    "details": {},
    "timestamp": "2025-11-03T12:34:56Z",
    "request_id": "req_abc123"
  }
}


RATE LIMITING

Global: 1000 requests/hour per API key
Per-endpoint limits vary (see API Reference)

Rate limit headers are included in all responses:
- X-RateLimit-Limit: Total requests allowed
- X-RateLimit-Remaining: Requests remaining
- X-RateLimit-Reset: Unix timestamp when limit resets

When rate limited, the API returns 429 Too Many Requests with a Retry-After
header indicating seconds to wait.


BUDGET CONTROLS

All organizations have a $10,000/month budget limit. This limit applies to the
total budget across all campaigns in a calendar month.

When creating or updating campaigns, the API validates:
- Individual campaign budgets cannot exceed $10,000
- Total monthly budget across all campaigns cannot exceed $10,000

Budget exceeded errors return 400 Bad Request with details:
- monthly_limit: 10000
- current_total: Current month's total
- requested: Requested budget
- available: Available budget
- affected_month: Which month is affected


PAGINATION

List endpoints support pagination via query parameters:

- limit: Number of items to return (default: 50, max: 100)
- offset: Number of items to skip (default: 0)

Example:
GET /api/v1/agent/campaigns/list?limit=20&offset=40

Response includes pagination metadata:
{
  "success": true,
  "data": {
    "campaigns": [...],
    "pagination": {
      "limit": 20,
      "offset": 40,
      "total": 150
    }
  }
}


COMMON WORKFLOWS

1. Create Campaign with Assets and Audiences

   a. Create campaign (POST /campaigns/create)
   b. Create or list assets (POST /assets/create-text-ad or GET /assets/list)
   c. Assign assets to campaign (POST /campaigns/{id}/assets)
   d. Create or list audiences (POST /audiences/create or GET /audiences/list)
   e. Assign audiences to campaign (POST /campaigns/{id}/audiences)

2. Update Existing Campaign

   a. Get campaign details (GET /campaigns/{id}/get)
   b. Update campaign (PATCH /campaigns/{id}/update)
   c. Verify changes (GET /campaigns/{id}/get)

3. Monitor Budget Usage

   a. Check budget status (GET /budget/status)
   b. Review current month and next 2 months
   c. View campaigns contributing to budget


TESTING

Use the provided test suite to verify your integration:

1. Set environment variables in .env.test:
   TEST_API_URL=http://localhost:3000
   TEST_API_KEY=your_api_key

2. Run tests:
   npm run test:agent-api

See tests/agent-api/README.md for detailed testing guide.


NEXT STEPS

- Review API Reference (api-reference.txt) for complete endpoint documentation
- Review Error Codes (error-codes.txt) for error handling
- See Examples (examples.txt) for common use cases


SUPPORT

For issues or questions:
- Review error responses with request_id for debugging
- Check audit logs in your account
- Consult error codes reference
